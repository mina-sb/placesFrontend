import{r as s,j as c}from"./index-401d96ae.js";const f=(e,t,u)=>{let i=!0;for(const l of t)l==="REQUIRED"&&(e.length===0||e.length<0)&&(i=!1),l==="MIN(5)"&&e.length<5&&(i=!1);return i},h=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.value,isValid:f(t.value,t.validator)};case"TOUCHED":return{...e,isTouched:!0};default:return e}},I=e=>{const[t,u]=s.useReducer(h,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),i=o=>{u({type:"CHANGE",value:o.target.value,validator:e.validators})},l=()=>{u({type:"TOUCHED"})},{id:d,onInput:a}=e,{value:n,isValid:r}=t;return s.useEffect(()=>{a(d,n,r)},[d,n,r,a]),e.type==="text"?c.jsx("input",{type:"text",id:e.id,className:`input ${t.isTouched&&!t.isValid&&e.validators.length?"input-required":""}`,placeholder:e.placeholder,onChange:i,onBlur:l,value:t.value}):c.jsx("textarea",{rows:e.rows,id:e.id,className:`input ${t.isTouched&&!t.isValid&&e.validators.length?"input-required":""}`,placeholder:e.placeholder,onChange:i,onBlur:l,value:t.value})},p=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let u=!0;for(const i in e.inputs)e.inputs[i]&&(i===t.inputId?u=u&&t.isValid:u=u&&e.inputs[i].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:u};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},E=(e,t)=>{const[u,i]=s.useReducer(p,{inputs:e,isValid:t}),l=s.useCallback((a,n,r)=>{i({type:"INPUT_CHANGE",value:n,isValid:r,inputId:a})},[]),d=s.useCallback((a,n)=>{i({type:"SET_DATA",inputs:a,formIsValid:n})},[]);return[u,l,d]};export{I,E as u};
