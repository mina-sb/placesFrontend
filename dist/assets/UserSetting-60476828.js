import{r as n,A as N,u as v,j as e,L as U,R as b,E as y,B as P,d as k,C as S}from"./index-305af527.js";import{u as D,I as E}from"./form-hook-b664fdd6.js";import{I as T}from"./ImageUpload-c198924b.js";const R="_settings_xpm87_1",$="_img_edit_container_xpm87_15",A="_img_xpm87_15",V="_delete_btn_xpm87_45",z="_info_edit_xpm87_77",F="_mt_2_xpm87_93",B="_img_info_xpm87_99",H="_info_container_xpm87_119",w="_tab_container_xpm87_125",L="_tabs_xpm87_131",q="_left_xpm87_181",M="_right_xpm87_187",O="_tab_title_xpm87_193",Q="_line_xpm87_199",a={settings:R,img_edit_container:$,img:A,delete_btn:V,info_edit:z,mt_2:F,img_info:B,info_container:H,tab_container:w,tabs:L,left:q,right:M,tab_title:O,line:Q},J=t=>{const i=n.useContext(N),{isLoading:c,error:r,sendRequest:d,clearError:s}=v(),[m,g,_]=D({name:{value:"",isValid:!1},email:{value:"",isValid:!1}},!1);n.useEffect(()=>{(async()=>{_({name:{value:t.name,isValid:!0},email:{value:t.email,isValid:!0}},!0)})()},[d,_]);const x=async u=>{let f;u.preventDefault();try{f=await d(`https://places.iran.liara.run/api/users/${i.userId}`,"PATCH",JSON.stringify({name:m.inputs.name.value,email:m.inputs.email.value,userId:i.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token}),t.getUser()}catch{}};return c?e.jsx("div",{className:"center",children:e.jsx(U,{})}):e.jsxs(b.Fragment,{children:[e.jsx(y,{error:r,onClear:s}),!c&&e.jsxs("form",{onSubmit:x,children:[e.jsx(E,{id:"name",type:"text",placeholder:"Name",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid title.",onInput:g,initialValid:!0,initialValue:t.name}),e.jsx(E,{id:"email",type:"text",placeholder:"Email",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid description (min. 5 characters).",onInput:g,initialValid:!0,initialValue:t.email}),e.jsx(P,{type:"submit",class:"third-color-button",disabled:!m.isValid,children:"Update Info"})]})]})},G="_toggle_container_b3dxz_1",K="_toggle_label_b3dxz_11",W="_toggle_input_b3dxz_25",X="_toggle_span_b3dxz_37",Y="_title_b3dxz_99",h={toggle_container:G,toggle_label:K,toggle_input:W,toggle_span:X,title:Y},j=({label:t,toggled:i,onClick:c})=>{const[r,d]=n.useState(i),s=()=>{d(!r),c(!r)};return e.jsxs("div",{className:h.toggle_container,children:[e.jsxs("label",{className:h.toggle_label,children:[e.jsx("input",{className:h.toggle_input,type:"checkbox",defaultChecked:r,onClick:s}),e.jsx("span",{className:h.toggle_span})]}),e.jsx("span",{className:h.title,children:t})]})};const Z=()=>{const t=i=>{console.log("Toggled:",i)};return e.jsxs(b.Fragment,{children:[e.jsx(j,{label:"Order Confirmation Notice",toggled:!0,onClick:t}),e.jsx(j,{label:"Ending Bid Notification ",toggled:!0,onClick:t}),e.jsx(j,{label:"Notification for approving",toggled:!0,onClick:t}),e.jsx(j,{label:"Payment Card Notification",toggled:!0,onClick:t}),e.jsx("div",{className:"btn-container",children:e.jsx(P,{class:"third-color-button",children:"Save"})})]})};const ee=t=>{const{isLoading:i,error:c,sendRequest:r,clearError:d}=v(),s=n.useContext(N),[m,g]=n.useState(null),[_,x]=n.useState(!1),u=async p=>{p.preventDefault();let l;try{const o=new FormData;o.append("image",m),l=await r(`https://places.iran.liara.run/api/users/${s.userId}/img`,"PATCH",o,{Authorization:"Bearer "+s.token})}catch(o){console.log(o)}s.login(l.userId,s.token,l.name,l.image)},f=async p=>{p.preventDefault();let l;try{const o=new FormData;o.append("image",""),l=await r(`https://places.iran.liara.run/api/users/${s.userId}/img`,"DELETE",o,{Authorization:"Bearer "+s.token})}catch{}s.login(l.userId,s.token,l.name,l.image),x(!0)};return e.jsxs(b.Fragment,{children:[e.jsx(T,{id:"image",deletedImg:_,setDeletedImg:x,profile:!0,defaultImg:t.img?`${t.img}`:k,saveImg:u,onInput:g}),e.jsx("span",{className:"delete_btn",onClick:f,children:e.jsx("i",{class:"bx bx-trash"})})]})},ie=()=>{const t=n.useContext(N),{isLoading:i,error:c,sendRequest:r,clearError:d}=v(),[s,m]=n.useState({}),[g,_]=n.useState(!0),[x,u]=n.useState(a.left),[f,p]=n.useState(""),l=()=>{_(!1),u(a.right)},o=()=>{_(!0),u(a.left)};n.useEffect(()=>{C()},[]);const C=async()=>{let I;try{I=await r(`https://places.iran.liara.run/api/users/${t.userId}`),m(I),p(I.image)}catch{}};return e.jsxs(b.Fragment,{children:[e.jsx(y,{error:c,onClear:d}),i&&e.jsx("div",{className:"center",children:e.jsx(U,{})}),!i&&s&&e.jsxs("div",{className:a.settings,children:[e.jsx("div",{className:a.img_edit_container,children:e.jsx(S,{children:e.jsxs("div",{className:a.img_edit_container,children:[e.jsx("h3",{children:s.name}),e.jsx("div",{className:a.img,children:e.jsx(ee,{img:f})}),e.jsx("span",{className:a.img_info,children:"Profile Settings Page Ui design Profile Settings Page Ui design Profile Settings Page Ui design Profile"})]})})}),e.jsx("div",{className:a.info_edit,children:e.jsxs(S,{className:"pad-0",children:[e.jsxs("div",{className:a.info_container,children:[e.jsx("h3",{children:"Edit Profile"}),e.jsxs("ul",{className:`${a.tabs} ${x}`,children:[e.jsx("li",{onClick:o,children:e.jsx("span",{className:a.tab_title,children:"User Info"})}),e.jsx("li",{onClick:l,children:e.jsx("span",{className:a.tab_title,children:"Notifications"})})]})]}),e.jsx("div",{className:a.line}),e.jsx("div",{className:a.info_container,children:e.jsxs("div",{className:a.tab_container,children:[g&&e.jsx(J,{name:s.name,email:s.email,getUser:C}),!g&&e.jsx(Z,{})]})})]})})]})]})};export{ie as default};
