import{r as l,A as v,u as E,a as I,b as P,j as e,L as C,C as y,R as V,E as R,B as A}from"./index-305af527.js";import{u as D,I as h}from"./form-hook-b664fdd6.js";/* empty css                  */const S=()=>{const n=l.useContext(v),{isLoading:c,error:o,sendRequest:i,clearError:x}=E(),[a,m]=l.useState(),s=I().placeId,f=P(),[r,d,p]=D({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);l.useEffect(()=>{(async()=>{try{const t=await i(`https://places.iran.liara.run/api/places/${s}`);m(t.place),p({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0)}catch{}})()},[i,s,p]);const j=async u=>{u.preventDefault();try{await i(`https://places.iran.liara.run/api/places/${s}`,"PATCH",JSON.stringify({title:r.inputs.title.value,description:r.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+n.token}),f("/"+n.userId+"/places")}catch{}};return c?e.jsx("div",{className:"center",children:e.jsx(C,{})}):!a&&!o?e.jsx("div",{className:"center",children:e.jsx(y,{children:e.jsx("h2",{children:"Could not find place!"})})}):e.jsxs(V.Fragment,{children:[e.jsx(R,{error:o,onClear:x}),!c&&a&&e.jsxs("form",{className:"place-form",onSubmit:j,children:[e.jsx("h3",{children:"Add a place"}),e.jsx(h,{id:"title",type:"text",placeholder:"Title",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid title.",onInput:d,initialValue:a.title,initialValid:!0}),e.jsx(h,{id:"description",type:"textarea",placeholder:"Description",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid description (min. 5 characters).",onInput:d,initialValue:a.description,initialValid:!0}),e.jsx(A,{type:"submit",class:"third-color-button",disabled:!r.isValid,children:"UPDATE PLACE"})]})]})};export{S as default};
