import{r as i,A as N,u as v,j as e,L as E,R as b,E as U,B as P,d as k,C as y}from"./index-9e2cd7ad.js";import{u as w,I as S}from"./form-hook-ddbccdb0.js";import{I as D}from"./ImageUpload-ebd61f6c.js";const T="_settings_xpm87_1",R="_img_edit_container_xpm87_15",$="_img_xpm87_15",A="_delete_btn_xpm87_45",V="_info_edit_xpm87_77",z="_mt_2_xpm87_93",F="_img_info_xpm87_99",B="_info_container_xpm87_119",H="_tab_container_xpm87_125",L="_tabs_xpm87_131",q="_left_xpm87_181",M="_right_xpm87_187",O="_tab_title_xpm87_193",Q="_line_xpm87_199",a={settings:T,img_edit_container:R,img:$,delete_btn:A,info_edit:V,mt_2:z,img_info:F,info_container:B,tab_container:H,tabs:L,left:q,right:M,tab_title:O,line:Q},J=t=>{const n=i.useContext(N),{isLoading:r,error:o,sendRequest:d,clearError:s}=v(),[m,g,_]=w({name:{value:"",isValid:!1},email:{value:"",isValid:!1}},!1);i.useEffect(()=>{(async()=>{_({name:{value:t.name,isValid:!0},email:{value:t.email,isValid:!0}},!0)})()},[d,_]);const x=async u=>{let f;u.preventDefault();try{f=await d(`https://extinct-sweatsuit-cow.cyclic.cloud/api/users/${n.userId}`,"PATCH",JSON.stringify({name:m.inputs.name.value,email:m.inputs.email.value,userId:n.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+n.token}),t.getUser()}catch{}};return r?e.jsx("div",{className:"center",children:e.jsx(E,{})}):e.jsxs(b.Fragment,{children:[e.jsx(U,{error:o,onClear:s}),!r&&e.jsxs("form",{onSubmit:x,children:[e.jsx(S,{id:"name",type:"text",placeholder:"Name",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid title.",onInput:g,initialValid:!0,initialValue:t.name}),e.jsx(S,{id:"email",type:"text",placeholder:"Email",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid description (min. 5 characters).",onInput:g,initialValid:!0,initialValue:t.email}),e.jsx(P,{type:"submit",class:"third-color-button",disabled:!m.isValid,children:"Update Info"})]})]})},G="_toggle_container_b3dxz_1",K="_toggle_label_b3dxz_11",W="_toggle_input_b3dxz_25",X="_toggle_span_b3dxz_37",Y="_title_b3dxz_99",h={toggle_container:G,toggle_label:K,toggle_input:W,toggle_span:X,title:Y},j=({label:t,toggled:n,onClick:r})=>{const[o,d]=i.useState(n),s=()=>{d(!o),r(!o)};return e.jsxs("div",{className:h.toggle_container,children:[e.jsxs("label",{className:h.toggle_label,children:[e.jsx("input",{className:h.toggle_input,type:"checkbox",defaultChecked:o,onClick:s}),e.jsx("span",{className:h.toggle_span})]}),e.jsx("span",{className:h.title,children:t})]})};const Z=()=>{const t=n=>{console.log("Toggled:",n)};return e.jsxs(b.Fragment,{children:[e.jsx(j,{label:"Order Confirmation Notice",toggled:!0,onClick:t}),e.jsx(j,{label:"Ending Bid Notification ",toggled:!0,onClick:t}),e.jsx(j,{label:"Notification for approving",toggled:!0,onClick:t}),e.jsx(j,{label:"Payment Card Notification",toggled:!0,onClick:t}),e.jsx("div",{className:"btn-container",children:e.jsx(P,{class:"third-color-button",children:"Save"})})]})};const ee=t=>{const{isLoading:n,error:r,sendRequest:o,clearError:d}=v(),s=i.useContext(N),[m,g]=i.useState(null),[_,x]=i.useState(!1),u=async p=>{p.preventDefault();let l;try{const c=new FormData;c.append("image",m),l=await o(`https://extinct-sweatsuit-cow.cyclic.cloud/api/users/${s.userId}/img`,"PATCH",c,{Authorization:"Bearer "+s.token})}catch{}s.login(l.userId,s.token,l.name,l.image)},f=async p=>{p.preventDefault();let l;try{const c=new FormData;c.append("image",""),l=await o(`https://extinct-sweatsuit-cow.cyclic.cloud/api/users/${s.userId}/img`,"DELETE",c,{Authorization:"Bearer "+s.token})}catch{}s.login(l.userId,s.token,l.name,l.image),x(!0)};return e.jsxs(b.Fragment,{children:[e.jsx(D,{id:"image",deletedImg:_,setDeletedImg:x,profile:!0,defaultImg:t.img?`https://extinct-sweatsuit-cow.cyclic.cloud/${t.img}`:k,saveImg:u,onInput:g}),e.jsx("span",{className:"delete_btn",onClick:f,children:e.jsx("i",{class:"bx bx-trash"})})]})},ne=()=>{const t=i.useContext(N),{isLoading:n,error:r,sendRequest:o,clearError:d}=v(),[s,m]=i.useState({}),[g,_]=i.useState(!0),[x,u]=i.useState(a.left),[f,p]=i.useState(""),l=()=>{_(!1),u(a.right)},c=()=>{_(!0),u(a.left)};i.useEffect(()=>{C()},[]);const C=async()=>{let I;try{I=await o(`https://extinct-sweatsuit-cow.cyclic.cloud/api/users/${t.userId}`),m(I),p(I.image)}catch{}};return e.jsxs(b.Fragment,{children:[e.jsx(U,{error:r,onClear:d}),n&&e.jsx("div",{className:"center",children:e.jsx(E,{})}),!n&&s&&e.jsxs("div",{className:a.settings,children:[e.jsx("div",{className:a.img_edit_container,children:e.jsx(y,{children:e.jsxs("div",{className:a.img_edit_container,children:[e.jsx("h3",{children:s.name}),e.jsx("div",{className:a.img,children:e.jsx(ee,{img:f})}),e.jsx("span",{className:a.img_info,children:"Profile Settings Page Ui design Profile Settings Page Ui design Profile Settings Page Ui design Profile"})]})})}),e.jsx("div",{className:a.info_edit,children:e.jsxs(y,{className:"pad-0",children:[e.jsxs("div",{className:a.info_container,children:[e.jsx("h3",{children:"Edit Profile"}),e.jsxs("ul",{className:`${a.tabs} ${x}`,children:[e.jsx("li",{onClick:c,children:e.jsx("span",{className:a.tab_title,children:"User Info"})}),e.jsx("li",{onClick:l,children:e.jsx("span",{className:a.tab_title,children:"Notifications"})})]})]}),e.jsx("div",{className:a.line}),e.jsx("div",{className:a.info_container,children:e.jsxs("div",{className:a.tab_container,children:[g&&e.jsx(J,{name:s.name,email:s.email,getUser:C}),!g&&e.jsx(Z,{})]})})]})})]})]})};export{ne as default};
