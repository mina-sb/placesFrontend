import{r as p,u as j,A as w,b as y,j as s,R as I,E,L as N,B as d}from"./index-a3d35e26.js";import{u as b,I as o}from"./form-hook-6badad8e.js";const R="/places/assets/hi-4c0f9c0b.png",L=()=>{const[e,m]=p.useState(!0),{isLoading:h,error:g,sendRequest:l,clearError:x}=j(),r=p.useContext(w),u=y(),[a,n,c]=b({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),v=()=>{e?c({...a.inputs,name:{value:"",isValid:!1}},!1):c({...a.inputs,name:void 0},a.inputs.email.isValid&&a.inputs.password.isValid),m(i=>!i)},f=async i=>{if(i.preventDefault(),e)try{const t=await l("http://localhost:5000/api/users/login","POST",JSON.stringify({email:a.inputs.email.value,password:a.inputs.password.value}),{"Content-Type":"application/json"});r.login(t.userId,t.token,t.name,t.image),u("/")}catch{}else try{const t=await l("http://localhost:5000/api/users/signup","POST",JSON.stringify({name:a.inputs.name.value,email:a.inputs.email.value,password:a.inputs.password.value}),{"Content-Type":"application/json"});r.login(t.userId,t.token),u("/")}catch{}};return s.jsxs(I.Fragment,{children:[s.jsx(E,{error:g,onClear:x}),s.jsxs("div",{className:"auth-container",children:[s.jsx("img",{className:"auth-img",src:R}),h&&s.jsx(N,{asOverlay:!0}),s.jsx("h2",{className:"auth-container-title",children:e?"Login":"Sign Up"}),s.jsxs("form",{onSubmit:f,children:[e?"":s.jsx(o,{type:"text",id:"name",placeholder:"Name",onInput:n,validators:["REQUIRED","MIN(4)"]}),s.jsx(o,{type:"text",id:"email",placeholder:"Email",onInput:n,validators:["REQUIRED","MIN(5)"]}),s.jsx(o,{type:"text",id:"password",placeholder:"Password",onInput:n,validators:["REQUIRED"]}),s.jsx(d,{type:"submit",class:"full-width-button main-color-button",disabled:!a.isValid,children:e?"Login":"Join Now"})]}),s.jsx(d,{class:"bg-color-button full-width-button",onClick:v,children:s.jsxs("p",{className:"link-to-signup-p",children:[e?"Donâ€™t have an account?":"Do you have an account already?",s.jsx("span",{className:"main-color-text",children:e?"Register now":"Login now"})]})})]})]})};export{L as default};
