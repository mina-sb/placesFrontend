import{r as p,u as j,A as w,b as y,j as a,R as I,E,L as N,B as d}from"./index-da943f87.js";import{u as b,I as o}from"./form-hook-2c33f82e.js";const R="/myPlaces/assets/hi-4c0f9c0b.png",L=()=>{const[e,m]=p.useState(!0),{isLoading:h,error:g,sendRequest:l,clearError:x}=j(),r=p.useContext(w),u=y(),[s,n,c]=b({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),v=()=>{e?c({...s.inputs,name:{value:"",isValid:!1}},!1):c({...s.inputs,name:void 0},s.inputs.email.isValid&&s.inputs.password.isValid),m(i=>!i)},f=async i=>{if(i.preventDefault(),e)try{const t=await l("https://places.iran.liara.run/api/users/login","POST",JSON.stringify({email:s.inputs.email.value,password:s.inputs.password.value}),{"Content-Type":"application/json"});r.login(t.userId,t.token,t.name,t.image),u("/")}catch{}else try{const t=await l("https://places.iran.liara.run/api/users/signup","POST",JSON.stringify({name:s.inputs.name.value,email:s.inputs.email.value,password:s.inputs.password.value}),{"Content-Type":"application/json"});r.login(t.userId,t.token),u("/")}catch{}};return a.jsxs(I.Fragment,{children:[a.jsx(E,{error:g,onClear:x}),a.jsxs("div",{className:"auth-container",children:[a.jsx("img",{className:"auth-img",src:R}),h&&a.jsx(N,{asOverlay:!0}),a.jsx("h2",{className:"auth-container-title",children:e?"Login":"Sign Up"}),a.jsxs("form",{onSubmit:f,children:[e?"":a.jsx(o,{type:"text",id:"name",placeholder:"Name",onInput:n,validators:["REQUIRED","MIN(4)"]}),a.jsx(o,{type:"text",id:"email",placeholder:"Email",onInput:n,validators:["REQUIRED","MIN(5)"]}),a.jsx(o,{type:"text",id:"password",placeholder:"Password",onInput:n,validators:["REQUIRED"]}),a.jsx(d,{type:"submit",class:"full-width-button main-color-button",disabled:!s.isValid,children:e?"Login":"Join Now"})]}),a.jsx(d,{class:"bg-color-button full-width-button",onClick:v,children:a.jsxs("p",{className:"link-to-signup-p",children:[e?"Donâ€™t have an account?":"Do you have an account already?",a.jsx("span",{className:"main-color-text",children:e?"Register now":"Login now"})]})})]})]})};export{L as default};
