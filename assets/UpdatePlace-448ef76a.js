import{r as l,A as v,u as E,a as y,b as I,j as e,L as P,C,R as V,E as R,B as A}from"./index-9e2cd7ad.js";import{u as D,I as x}from"./form-hook-ddbccdb0.js";/* empty css                  */const w=()=>{const c=l.useContext(v),{isLoading:n,error:o,sendRequest:i,clearError:h}=E(),[a,m]=l.useState(),s=y().placeId,f=I(),[r,d,p]=D({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);l.useEffect(()=>{(async()=>{try{const t=await i(`https://extinct-sweatsuit-cow.cyclic.cloud/api/places/${s}`);m(t.place),p({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0)}catch{}})()},[i,s,p]);const j=async u=>{u.preventDefault();try{await i(`https://extinct-sweatsuit-cow.cyclic.cloud/api/places/${s}`,"PATCH",JSON.stringify({title:r.inputs.title.value,description:r.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+c.token}),f("/"+c.userId+"/places")}catch{}};return n?e.jsx("div",{className:"center",children:e.jsx(P,{})}):!a&&!o?e.jsx("div",{className:"center",children:e.jsx(C,{children:e.jsx("h2",{children:"Could not find place!"})})}):e.jsxs(V.Fragment,{children:[e.jsx(R,{error:o,onClear:h}),!n&&a&&e.jsxs("form",{className:"place-form",onSubmit:j,children:[e.jsx("h3",{children:"Add a place"}),e.jsx(x,{id:"title",type:"text",placeholder:"Title",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid title.",onInput:d,initialValue:a.title,initialValid:!0}),e.jsx(x,{id:"description",type:"textarea",placeholder:"Description",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid description (min. 5 characters).",onInput:d,initialValue:a.description,initialValid:!0}),e.jsx(A,{type:"submit",class:"third-color-button",disabled:!r.isValid,children:"UPDATE PLACE"})]})]})};export{w as default};
