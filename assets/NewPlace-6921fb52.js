import{r as x,A as v,u as f,b as h,j as e,R as g,E as j,L as I,B as E}from"./index-8791391e.js";import{u as D,I as r}from"./form-hook-ac0a9b41.js";/* empty css                  */import{I as R}from"./ImageUpload-f70defb9.js";const b=()=>{const i=x.useContext(v),{isLoading:l,error:n,sendRequest:o,clearError:d}=f(),[t,s]=D({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}},!1),p=h(),u=async c=>{c.preventDefault();try{const a=new FormData;a.append("title",t.inputs.title.value),a.append("description",t.inputs.description.value),a.append("address",t.inputs.address.value),a.append("image",t.inputs.image.value);const m=await o("https://places.iran.liara.run/api/places","POST",a,{Authorization:"Bearer "+i.token});console.log(m),p("/")}catch(a){console.log(a)}};return e.jsxs(g.Fragment,{children:[e.jsx(j,{error:n,onClear:d}),e.jsxs("form",{className:"place-form",onSubmit:u,children:[l&&e.jsx(I,{asOverlay:!0}),e.jsx("h3",{children:"Add a place"}),e.jsx(r,{id:"title",type:"text",placeholder:"Title",errorText:"Please enter a valid title.",validators:["REQUIRED","MIN(5)"],onInput:s}),e.jsx(r,{id:"address",type:"text",placeholder:"Address",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid address.",onInput:s}),e.jsx(r,{id:"description",type:"textarea",placeholder:"Description",rows:"6",validators:[],errorText:"Please enter a valid description (at least 5 characters).",onInput:s}),e.jsx(R,{id:"image",onInput:s,errorText:"Please provide an image."}),e.jsx(E,{type:"submit",disabled:!t.isValid,children:"ADD PLACE"})]})]})};export{b as default};
