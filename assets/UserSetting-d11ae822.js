import{r as n,A as N,u as v,j as e,L as S,R as b,E as k,B as D,d as U,C as E}from"./index-1a5bfce8.js";import{u as P,I as y}from"./form-hook-d43b532a.js";import{I as T}from"./ImageUpload-cbbb93cf.js";const A="_settings_xpm87_1",R="_img_edit_container_xpm87_15",$="_img_xpm87_15",V="_delete_btn_xpm87_45",z="_info_edit_xpm87_77",F="_mt_2_xpm87_93",B="_img_info_xpm87_99",H="_info_container_xpm87_119",w="_tab_container_xpm87_125",L="_tabs_xpm87_131",q="_left_xpm87_181",M="_right_xpm87_187",G="_tab_title_xpm87_193",J="_line_xpm87_199",s={settings:A,img_edit_container:R,img:$,delete_btn:V,info_edit:z,mt_2:F,img_info:B,info_container:H,tab_container:w,tabs:L,left:q,right:M,tab_title:G,line:J},O=t=>{const i=n.useContext(N),{isLoading:c,error:r,sendRequest:d,clearError:a}=v(),[m,g,_]=P({name:{value:"",isValid:!1},email:{value:"",isValid:!1}},!1);n.useEffect(()=>{(async()=>{_({name:{value:t.name,isValid:!0},email:{value:t.email,isValid:!0}},!0)})()},[d,_]);const x=async u=>{let f;u.preventDefault();try{f=await d(`https://places.iran.liara.run/api/users/${i.userId}`,"PATCH",JSON.stringify({name:m.inputs.name.value,email:m.inputs.email.value,userId:i.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token}),t.getUser()}catch{}};return c?e.jsx("div",{className:"center",children:e.jsx(S,{})}):e.jsxs(b.Fragment,{children:[e.jsx(k,{error:r,onClear:a}),!c&&e.jsxs("form",{onSubmit:x,children:[e.jsx(y,{id:"name",type:"text",placeholder:"Name",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid title.",onInput:g,initialValid:!0,initialValue:t.name}),e.jsx(y,{id:"email",type:"text",placeholder:"Email",validators:["REQUIRED","MIN(5)"],errorText:"Please enter a valid description (min. 5 characters).",onInput:g,initialValid:!0,initialValue:t.email}),e.jsx(D,{type:"submit",class:"third-color-button",disabled:!m.isValid,children:"Update Info"})]})]})},Q="_toggle_container_b3dxz_1",K="_toggle_label_b3dxz_11",W="_toggle_input_b3dxz_25",X="_toggle_span_b3dxz_37",Y="_title_b3dxz_99",h={toggle_container:Q,toggle_label:K,toggle_input:W,toggle_span:X,title:Y},j=({label:t,toggled:i,onClick:c})=>{const[r,d]=n.useState(i),a=()=>{d(!r),c(!r)};return e.jsxs("div",{className:h.toggle_container,children:[e.jsxs("label",{className:h.toggle_label,children:[e.jsx("input",{className:h.toggle_input,type:"checkbox",defaultChecked:r,onClick:a}),e.jsx("span",{className:h.toggle_span})]}),e.jsx("span",{className:h.title,children:t})]})};const Z=()=>{const t=i=>{console.log("Toggled:",i)};return e.jsxs(b.Fragment,{children:[e.jsx(j,{label:"Order Confirmation Notice",toggled:!0,onClick:t}),e.jsx(j,{label:"Ending Bid Notification ",toggled:!0,onClick:t}),e.jsx(j,{label:"Notification for approving",toggled:!0,onClick:t}),e.jsx(j,{label:"Payment Card Notification",toggled:!0,onClick:t}),e.jsx("div",{className:"btn-container",children:e.jsx(D,{class:"third-color-button",children:"Save"})})]})};const ee=t=>{const{isLoading:i,error:c,sendRequest:r,clearError:d}=v(),a=n.useContext(N),[m,g]=n.useState(null),[_,x]=n.useState(!1),u=async p=>{p.preventDefault();let l;try{const o=new FormData;o.append("image",m),l=await r(`https://places.iran.liara.run/api/users/${a.userId}/img`,"PATCH",o,{Authorization:"Bearer "+a.token})}catch(o){console.log(o)}a.login(l.userId,a.token,l.name,l.image)},f=async p=>{p.preventDefault();let l;try{const o=new FormData;o.append("image",""),l=await r(`https://places.iran.liara.run/api/users/${a.userId}/img`,"DELETE",o,{Authorization:"Bearer "+a.token})}catch{}a.login(l.userId,a.token,l.name,l.image),x(!0)};return e.jsxs(b.Fragment,{children:[e.jsx(T,{id:"image",deletedImg:_,setDeletedImg:x,profile:!0,defaultImg:t.img?`${t.img}`:U,saveImg:u,onInput:g}),e.jsx("span",{className:"delete_btn",onClick:f,children:e.jsx("i",{class:"bx bx-trash"})})]})},ie=()=>{const t=n.useContext(N),{isLoading:i,error:c,sendRequest:r,clearError:d}=v(),[a,m]=n.useState({}),[g,_]=n.useState(!0),[x,u]=n.useState(s.left),[f,p]=n.useState(""),l=()=>{_(!1),u(s.right)},o=()=>{_(!0),u(s.left)};n.useEffect(()=>{C()},[]);const C=async()=>{let I;try{I=await r(`https://places.iran.liara.run/api/users/${t.userId}`),m(I),p(I.image)}catch{}};return e.jsxs(b.Fragment,{children:[e.jsx(k,{error:c,onClear:d}),i&&e.jsx("div",{className:"center",children:e.jsx(S,{})}),!i&&a&&e.jsxs("div",{className:s.settings,children:[e.jsx("div",{className:s.img_edit_container,children:e.jsx(E,{children:e.jsxs("div",{className:s.img_edit_container,children:[e.jsx("h3",{children:a.name}),e.jsx("div",{className:s.img,children:e.jsx(ee,{img:f})}),e.jsx("span",{className:s.img_info,children:"Accepted formats include PNG and JPG. Pick the perfect picture to define your profile."})]})})}),e.jsx("div",{className:s.info_edit,children:e.jsxs(E,{className:"pad-0",children:[e.jsxs("div",{className:s.info_container,children:[e.jsx("h3",{children:"Edit Profile"}),e.jsxs("ul",{className:`${s.tabs} ${x}`,children:[e.jsx("li",{onClick:o,children:e.jsx("span",{className:s.tab_title,children:"User Info"})}),e.jsx("li",{onClick:l,children:e.jsx("span",{className:s.tab_title,children:"Notifications"})})]})]}),e.jsx("div",{className:s.line}),e.jsx("div",{className:s.info_container,children:e.jsxs("div",{className:s.tab_container,children:[g&&e.jsx(O,{name:a.name,email:a.email,getUser:C}),!g&&e.jsx(Z,{})]})})]})})]})]})};export{ie as default};
